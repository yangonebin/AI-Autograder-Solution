# AI-Powered Automated Scoring Solution (feat. Google Gemini)

## 📌 프로젝트 개요

본 프로젝트는 단순한 과제 제출 시스템을 넘어, **Google의 최첨단 AI 모델인 Gemini Pro를 활용하여 학생들의 과제를 다각적으로 분석하고 정량적/정성적 평가를 자동화하는 혁신적인 솔루션**입니다. 

교수/조교의 반복적인 채점 업무를 획기적으로 줄이는 동시에, 학생들에게는 개별화되고 깊이 있는 피드백을 신속하게 제공하는 것을 목표로 합니다. 이 시스템을 구축하기 위해 프롬프트 엔지니어링, 백엔드 API 설계, 실시간 데이터베이스 연동, 동적 프론트엔드 구현 등 복잡하고 정교한 기술적 과제들을 해결했습니다.

---

## 🔥 핵심 아키텍처 및 기술적 난관 극복기

이 시스템은 보이는 것보다 훨씬 복잡한 과정을 거쳐 동작합니다. 단순한 API 호출이 아닌, 신뢰성 있는 AI 채점 시스템을 구축하기 위해 다음과 같은 아키텍처를 설계하고 기술적 난관들을 극복했습니다.

### 1. **AI 채점 엔진: Gemini API와 프롬프트 엔지니어링의 예술**

- **도전 과제**: 생성형 AI는 창의적이지만, 정해진 포맷 없이 자유로운 형태(Free-form)의 텍스트를 생성합니다. 자동화 시스템에 이를 그대로 적용할 경우, 응답을 파싱(parsing)하기 불가능하여 시스템이 매번 실패하는 치명적인 문제가 발생합니다.
- **해결 전략**:
    1.  **JSON 형식 강제**: 프롬프트 엔지니어링을 통해 Gemini 모델이 반드시 **엄격한 JSON 형식**으로만 응답하도록 설계했습니다. 이를 통해 AI의 창의적인 답변을 시스템이 이해할 수 있는 정형 데이터(`scores`, `total_score`, `feedback`)로 변환하는 데 성공했습니다.
        ```python
        # aievent/main.py 의 일부
        # AI가 예측 불가능한 텍스트가 아닌, 기계가 즉시 처리할 수 있는 JSON 객체를 반환하도록 강제하는 핵심 프롬프트
        prompt = f"""...
        결과는 반드시 다음 JSON 형식에 맞춰서 반환해주세요. 다른 텍스트나 설명 없이 JSON 객체만 반환해야 합니다:
        {{
            "scores": {{
                "prompt_completeness": <점수>,
                "learning_creativity": <점수>,
                "output_quality": <점수>,
                "sharing_contribution": <점수>
            }},
            "total_score": <총점>,
            "feedback": "<구체적인 종합 피드백 내용>"
        }}
        """
        ```
    2.  **응답 데이터 정제 및 검증**: 만에 하나 AI가 JSON 형식 앞뒤에 불필요한 마크다운 코드(\`\`\`)를 붙여 보내는 경우에 대비하여, 백엔드에서 응답을 받자마자 이를 제거하고 순수한 JSON으로 정제하는 방어 코드를 추가하여 시스템의 안정성을 극대화했습니다.

### 2. **실시간 풀스택(Full-stack) 아키텍처**

- **도전 과제**: 사용자가 채점을 요청하고, AI가 채점을 완료했을 때, 이 모든 과정이 웹페이지 새로고침 없이 실시간으로 반영되어야 사용자 경험이 극대화됩니다.
- **해결 전략**: **Firebase Ecosystem**을 유기적으로 결합하여 실시간 데이터 동기화 문제를 해결했습니다.
    1.  **[프론트엔드] Firebase Hosting**: 관리자 대시보드(HTML, CSS, JS)를 호스팅합니다.
    2.  **[트리거] Interactive Chatbot**: 관리자가 챗봇을 통해 특정 학생의 채점을 요청합니다. (`chatbot.js`)
    3.  **[백엔드] Cloud Functions**: 채점 요청을 받아 Gemini API와 통신하고, 결과를 받아 처리하는 핵심 비즈니스 로직을 수행합니다.
    4.  **[데이터베이스] Firestore**: AI가 채점한 점수와 피드백 결과를 저장합니다.
    5.  **[실시간 동기화]**: Firestore에 데이터가 업데이트되면, 관리자 대시보드(`admin.js`)는 이 변경을 실시간으로 감지하여 페이지 새로고침 없이 즉시 화면의 점수와 피드백을 업데이트합니다.

### 3. **동적 웹 인터페이스**

- **도전 과제**: 채점 결과를 단순히 텍스트로 보여주는 것이 아니라, 관리자가 한눈에 모든 학생의 제출 및 채점 현황을 파악할 수 있는 동적인 테이블 형태의 UI가 필요했습니다.
- **해결 전략**: JavaScript를 사용하여 Firestore 데이터베이스의 `submissions` 컬렉션을 실시간으로 구독(subscribe)하고, 데이터 변경이 있을 때마다 DOM을 직접 조작하여 테이블(`submissions-tbody`)의 내용을 동적으로 생성 및 업데이트하는 로직을 구현했습니다.

---

## 🚀 주요 기능

*   **Gemini 기반 자동 채점**: 정교하게 설계된 채점 기준(프롬프트 완성도, 독창성, 결과물 완성도 등)에 따라 AI가 과제를 분석하고 점수와 피드백을 생성합니다.
*   **실시간 관리자 대시보드**: Firestore와 연동하여 모든 학생의 과제 제출 현황, 채점 상태, 점수, 피드백을 실시간으로 확인하고 관리할 수 있습니다.
*   **대화형 채점 봇**: "채점 시작", "선택한 학생 채점" 등의 명령어를 통해 직관적으로 AI 채점 프로세스를 시작할 수 있는 챗봇 인터페이스를 제공합니다.

---

## 🛠️ 설치 및 실행 방법

1.  **저장소 클론:**
    ```bash
    git clone https://github.com/yangonebin/AI-Autograder-Solution.git
    cd AI-Autograder-Solution
    ```

2.  **Firebase CLI 설치 및 로그인:**
    ```bash
    npm install -g firebase-tools
    firebase login
    ```

3.  **프로젝트 초기화:**
    ```bash
    firebase init
    ```
    (Hosting, Functions, Firestore 선택)

4.  **필요 라이브러리 설치 (functions 폴더):**
    ```bash
    cd functions
    pip install -r requirements.txt
    ```

5.  **배포:**
    ```bash
    firebase deploy
    ```
